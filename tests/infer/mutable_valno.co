// RUN: choreo -es %s | FileCheck --match-full-lines %s
// RUN: choreo -vn %s | FileCheck --check-prefix=VALNO --match-full-lines %s

#include "choreo.h"

__co__ void foo(s32 yyy) {
  s32 x = 555;
  x = 1;
  s32 y = yyy + x;
  println(y);
}

// VALNO:  scope-1 {
// VALNO:   New VN #0: 'const_1'
// VALNO:   Alias "::@__choreo_no_tiling__" -> #0
// VALNO:   New VN #1: '::__choreo_no_tiling__'
// VALNO:   New VN #2: '::foo::yyy'
// VALNO:   New VN #3: 'const_555'
// VALNO:   New VN #4: '::foo::x'
// VALNO:   New VN #5: '+:#4:#2'
// VALNO:   New VN #6: '::foo::y'
// VALNO:  } // end scope-1

// CHECK:  int x = 555;
// CHECK:  x = 1;
// CHECK:  int y = (x + yyy);
// CHECK:  printf("%lld\n", static_cast<long long>(y));
