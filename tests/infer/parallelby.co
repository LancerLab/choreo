// RUN: choreo -i %s | FileCheck --match-full-lines %s

__co__ void bar1() {
  parallel bdim = {x, y} by [2, 6] {
    local f16[4] l;
  }

  parallel gdim = {xx, yy, zz} by [2, 6, 3] {
    parallel bdim = {x, y} by [4, 5] {
      local f16[4] l;
    }
  }

  parallel p by 4 {
    parallel q = {x, y, z} by [4, 3, 2] {
      local f16[4] l;
    }
  }
}

// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::bdim, Type: {int,int}->[2, 6]
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::x, Type: {int}->[2](pi:x)
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::y, Type: {int}->[6](pi:y)
// CHECK: Symbol:    ::bar1{{(::paraby_[0-9]+)*}}::l, Type: local f16 mdspan<1> [4]
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::gdim, Type: {int,int,int}->[2, 6, 3]
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::xx, Type: {int}->[2](pi:x)
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::yy, Type: {int}->[6](pi:y)
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::zz, Type: {int}->[3](pi:z)
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::bdim, Type: {int,int}->[4, 5]
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::x, Type: {int}->[4](pi:x)
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::y, Type: {int}->[5](pi:y)
// CHECK: Symbol:    ::bar1{{(::paraby_[0-9]+)*}}::l, Type: local f16 mdspan<1> [4]
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::p, Type: {int}->[4]
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::p__elem__x, Type: {int}->[4](pi:x)
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::q, Type: {int,int,int}->[4, 3, 2]
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::x, Type: {int}->[4](pi:x)
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::y, Type: {int}->[3](pi:y)
// CHECK: Bounded:   ::bar1{{(::paraby_[0-9]+)*}}::z, Type: {int}->[2](pi:z)
// CHECK: Symbol:    ::bar1{{(::paraby_[0-9]+)*}}::l, Type: local f16 mdspan<1> [4]
// CHECK: Function:  ::bar1, Type: void (*)()
