// RUN: choreo -i %s | FileCheck --match-full-lines %s

__co__ void foo(int k) {
  int a = 3;
  if (k > 1) {
    b = a + 1;
    s32 [a, b, k] ifv0;
  } else {
    b = a - 1;
    s32 [a, b, k] ifv1;
    if (k < 3) {
      c = a + 5;
      s32 [a, b + 2, c] ifv2;
    } else {
      c = b + 7;
      s32 [a + 2, b - 1, c - 3] ifv3;
    }
  }
}

// CHECK: Parameter: ::foo::k, Type: s32
// CHECK: Symbol:    ::foo::a, Type: s32
// CHECK: Symbol:    ::foo::cond_if_0::b, Type: s32
// CHECK: Symbol:    ::foo::cond_if_0::ifv0, Type: global s32 mdspan<3> [3, 4, ::foo::k]
// CHECK: Symbol:    ::foo::cond_else1::b, Type: s32
// CHECK: Symbol:    ::foo::cond_else1::ifv1, Type: global s32 mdspan<3> [3, 2, ::foo::k]
// CHECK: Symbol:    ::foo::cond_else1::cond_if_1::c, Type: s32
// CHECK: Symbol:    ::foo::cond_else1::cond_if_1::ifv2, Type: global s32 mdspan<3> [3, 4, 8]
// CHECK: Symbol:    ::foo::cond_else1::cond_else2::c, Type: s32
// CHECK: Symbol:    ::foo::cond_else1::cond_else2::ifv3, Type: global s32 mdspan<3> [5, 1, 6]
// CHECK: Function:  ::foo, Type: void (*)(s32)
