// RUN: choreo -e %s | FileCheck --match-full-lines %s

__co__ void foo(f32 [14] b) {
  mutable int a = 3;
  a += 3;
  a -= 4;
  a *= 5;
  a /= 6;
  a %= 7;

  foreach i in [b.span] {
    b.at(i) += 3;
    b.at(i + 1) -= 4;
    b.at(i * 3) *= 5;
    b.at(i - 4) /= 6;
    b.at(i / 5) %= 7;
  }
}

// CHECK: ChoreoFunction
// CHECK:  `- Name: foo
// CHECK:  `- Return type: void
// CHECK:  `- Parameters:
// CHECK:    `-  type: f32 [ 14 ], symbol: b
// CHECK:  `- Var Decl (mutable s32): a =  3
// CHECK:  `- Assign: a =  (a + 3)
// CHECK:  `- Assign: a =  (a - 4)
// CHECK:  `- Assign: a =  (a * 5)
// CHECK:  `- Assign: a =  (a / 6)
// CHECK:  `- Assign: a =  (a % 7)
// CHECK:  `- With Block:
// CHECK:    (within constraints)
// CHECK:    `- i in [ b.span ]
// CHECK:    (with statements)
// CHECK:    `- Foreach Block:
// CHECK:     `- Iteration variables: i
// CHECK:     `- Assign: b[i] =  (b[i] + 3)
// CHECK:     `- Assign: b[ (i + 1) ] =  (b[ (i + 1) ] - 4)
// CHECK:     `- Assign: b[ (i * 3) ] =  (b[ (i * 3) ] * 5)
// CHECK:     `- Assign: b[ (i - 4) ] =  (b[ (i - 4) ] / 6)
// CHECK:     `- Assign: b[ (i / 5) ] =  (b[ (i / 5) ] % 7)
