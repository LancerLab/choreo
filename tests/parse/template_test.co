// RUN: choreo -e %s | FileCheck --match-full-lines %s

__cok__ { // kernel program
template<int m, int n>
void hello() { printf("hello choreo\n"); }
}

// choreo tileflow program
__co__ void co_hello() {
  parallel p by 1 {
    call hello<1, 2>();
    call hello<#p, 2>();
    call hello<4*#p, 2*#p>();
  }
}

// host program
int main() {
  return co_hello();
}

// CHECK:  `- with template parameters: 1, 2
// CHECK:  `- with template parameters:  (ubound p) , 2
// CHECK:  `- with template parameters:  (4 *  (ubound p) ) ,  (2 *  (ubound p) )
